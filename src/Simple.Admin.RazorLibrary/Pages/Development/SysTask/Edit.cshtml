@page "/Development/SysTask/Edit"
@model Simple.Admin.RazorLibrary.Pages.Development.SysTask.EditModel

<div class="layui-form">
    <input type="hidden" name="id" value="@Model.TaskItem.Id" />
    <div class="mainBox">
        <div class="main-container">
            <div class="layui-form-item">
                <label class="layui-form-label">任务名称</label>
                <div class="layui-input-block">
                    <input type="text" name="name" value="@Model.TaskItem.TaskName" disabled autocomplete="off" placeholder="请输入任务名称"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label mi-required-label">状态</label>
                <div class="layui-input-block">
                    <input type="radio" name="isEnabled" value="1" title="启用" @(Model.TaskItem.IsEnabled == 1 ? "checked" : "")>
                    <input type="radio" name="isEnabled" value="0" title="禁用" @(Model.TaskItem.IsEnabled == 0 ? "checked" : "")>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label mi-required-label">cron表达式</label>
                <div class="layui-input-block">
                    <input type="text" name="cron" lay-verify="required" value="@Model.TaskItem.Cron" autocomplete="off" placeholder="请输入cron表达式"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">额外参数</label>
                <div class="layui-input-block">
                    <input type="text" name="extraParams" value="@Model.TaskItem.ExtraParams" autocomplete="off" placeholder="请输入额外参数"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-block">
                    <input type="text" name="remark" value="@Model.TaskItem.Remark" autocomplete="off" placeholder="请输入备注"
                           class="layui-input">
                </div>
            </div>
        </div>
    </div>
    <div class="bottom">
        <div class="button-container">
            <button type="submit" class="pear-btn pear-btn-primary pear-btn-sm" lay-submit
                    lay-filter="save">
                <i class="layui-icon layui-icon-ok"></i>
                提交
            </button>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        layui.use(['form', 'jquery', 'common'], function () {
            let form = layui.form;
            let $ = layui.jquery;
            let common = layui.common;

            form.on('submit(save)', function (data) {
                layer.confirm('确认提交吗？', {
                    icon: 3,
                    title: '提示'
                }, function (index) {
                    layer.close(index);
                    common.submit('/api/SysTask/Update', data.field, null, 'main-table')
                });
                return false;
            });
        })
    </script>
}